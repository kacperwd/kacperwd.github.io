var c=function(){var c=!![];return function(d,e){var f=c?function(){if(e){var g=e['apply'](d,arguments);e=null;return g;}}:function(){};c=![];return f;};}();var a9=c(this,function(){var c=function(){return'\x64\x65\x76';},d=function(){return'\x77\x69\x6e\x64\x6f\x77';};var e=function(){var i=new RegExp('\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d');return!i['\x74\x65\x73\x74'](c['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var f=function(){var j=new RegExp('\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b');return j['\x74\x65\x73\x74'](d['\x74\x6f\x53\x74\x72\x69\x6e\x67']());};var g=function(k){var l=~-0x1>>0x1+0xff%0x0;if(k['\x69\x6e\x64\x65\x78\x4f\x66']('\x69'===l)){h(k);}};var h=function(m){var n=~-0x4>>0x1+0xff%0x0;if(m['\x69\x6e\x64\x65\x78\x4f\x66']((!![]+'')[0x3])!==n){g(m);}};if(!e()){if(!f()){g('\x69\x6e\x64\u0435\x78\x4f\x66');}else{g('\x69\x6e\x64\x65\x78\x4f\x66');}}else{g('\x69\x6e\x64\u0435\x78\x4f\x66');}});a9();var game={'baseWidth':0x168,'baseHeight':0x280,'spaces':{},'res':null,'pixelsToUnits':function(d){return d*0.05;},'unitsToPixels':function(e){return e*0x14;},'drawableToBody':function(f,g){f['position']=game['translate'](g['getPosition']());f['angle']=-g['getAngle']();},'translate':function(h){var i={'x':game['unitsToPixels'](h['x'])+game['baseWidth']*0.5,'y':game['unitsToPixels'](h['y'])*-0x1+game['baseHeight']};return i;}};PP['loader']['add']('background','files/background.png','img');PP['loader']['add']('car','files/car.png','img');PP['loader']['add']('tire','files/tire.png','img');PP['loader']['add']('button','files/button-placeholder.png','img');PP['loader']['load'](null,function(j){game['res']=j;init();});var init=function(){var k=[{'x':game['pixelsToUnits'](-game['baseWidth']/0x2),'y':game['pixelsToUnits'](game['baseHeight']/0x2)},{'x':game['pixelsToUnits'](0x5a),'y':game['pixelsToUnits'](-0x14),'linearX':!![]},{'x':game['pixelsToUnits'](0x78),'y':game['pixelsToUnits'](0x0)},{'x':game['pixelsToUnits'](0x64),'y':game['pixelsToUnits'](0x64)},{'x':game['pixelsToUnits'](0x1),'y':game['pixelsToUnits'](0xc8)},{'x':game['pixelsToUnits'](0x1e),'y':game['pixelsToUnits'](0x32),'reverse':!![]}];k=smoothenTerrain(k);createSpaces();createBackground();drawTerrain(k,game['spaces']['background']['context']);createStates();preparePlanck();createPlanckTerrain(k);createPlanckCar();if(window['location']['href']['indexOf']('?testbed=true')>-0x1){planck['testbed'](function(l){return game['pworld'];});}else{prepareStage();}PP['states']['start']('level');};var createSpaces=function(){game['spaces']['background']=PP['stage']['addDrawingSpace']({'width':game['baseWidth'],'height':game['baseHeight'],'clearBeforeRender':![]},{'alpha':![]});game['spaces']['screen']=PP['stage']['addDrawingSpace']({'width':game['baseWidth'],'height':game['baseHeight'],'clearBeforeRender':!![]},{'alpha':!![]});};var createBackground=function(){var m=new PP['Drawable'](game['res']['background']['img']);m['position']['x']=game['baseWidth']/0x2+0x96+Math['round'](Math['random']()*0x32);m['position']['y']=game['baseHeight']/0x2;game['spaces']['background']['addDrawable'](m);game['spaces']['background']['redraw']();};var smoothenTerrain=function(n,o){var p=[];p['push'](n[0x0]);for(var q=0x1,r=n['length'];q<r;q++){if(n[q]['y']==0x0){p['push']({'x':n[q]['x'],'y':n[q]['y']});continue;}if(typeof o!='number')o=0.1;var s=[];var t=[0x0,0x0];for(var u=-(Math['PI']/0x2)+Math['PI']/0x2*o;u<=0x0;){var v=Math['cos'](u);var w=0x1-Math['sin'](Math['PI']+u);s['push']({'x':n[q]['linearX']?n[q]['x']*o:n[q]['x']*v-t[0x0],'y':n[q]['linearY']?n[q]['y']*o:n[q]['y']*w-t[0x1]});u+=Math['PI']/0x2*o;t[0x0]+=s[s['length']-0x1]['x'];t[0x1]+=s[s['length']-0x1]['y'];}if(n[q]['reverse'])s['reverse']();p=p['concat'](s);}return p;};var drawTerrain=function(z,A){var B={'x':z[0x0]['x'],'y':z[0x0]['y']};B=game['translate'](B);A['beginPath']();A['moveTo'](B['x'],B['y']);for(var C=0x1,D=z['length'];C<D;C++){B['x']+=game['unitsToPixels'](z[C]['x']);B['y']-=game['unitsToPixels'](z[C]['y']);A['lineTo'](B['x'],B['y']);}A['strokeStyle']='#fcce18';A['lineCap']='round';A['lineWidth']=0x7;A['lineTo'](game['baseWidth'],B['y']);A['stroke']();A['lineTo'](game['baseWidth'],game['baseHeight']);A['lineTo'](0x0,game['baseHeight']);A['lineTo'](z[0x0]['x'],z[0x0]['y']);A['fillStyle']='#432f26';A['fill']();A['setTransform'](0x1,0x0,0x0,0x1,0x0,0x0);};var createStates=function(){PP['states']['add']('level',game['stateLevel']);};var preparePlanck=function(){game['pworld']=planck['World']({'gravity':planck['Vec2'](0x0,-0xa)});};var createPlanckTerrain=function(E){var F=game['pworld']['createBody']();var G={'x':E[0x0]['x'],'y':E[0x0]['y']};for(var H=0x1,I=E['length'];H<I;H++){var J={'x':G['x']+E[H]['x'],'y':G['y']+E[H]['y']};F['createFixture'](planck['Edge'](planck['Vec2'](G['x'],G['y']),planck['Vec2'](J['x'],J['y'])),{'density':0x0,'friction':0x1});G['x']=J['x'];G['y']=J['y'];}};var createPlanckCar=function(){var K=game['pworld']['createBody']({'type':'dynamic','position':planck['Vec2'](game['pixelsToUnits'](-game['baseWidth']/0x2+0x32),game['pixelsToUnits'](game['baseHeight']/1.75))});K['createFixture'](planck['Box'](game['pixelsToUnits'](0x1d/0x2),game['pixelsToUnits'](0x13/0x2),planck['Vec2'](game['pixelsToUnits'](-0x7),game['pixelsToUnits'](-0x1))),{'density':0x1});K['createFixture'](planck['Box'](game['pixelsToUnits'](0x11/0x2),game['pixelsToUnits'](0xc/0x2),planck['Vec2'](game['pixelsToUnits'](0xf),game['pixelsToUnits'](-0x4))),{'density':1.5});K['setAngularDamping'](0x1);var L=K['getPosition']();var M={'density':0.5,'friction':0x3};var N=game['pworld']['createDynamicBody'](planck['Vec2'](L['x']+game['pixelsToUnits'](-0xe),L['y']-game['pixelsToUnits'](0xd)));N['createFixture'](planck['Circle'](game['pixelsToUnits'](0x5)),M);var O=game['pworld']['createDynamicBody'](planck['Vec2'](L['x']+game['pixelsToUnits'](0xf),L['y']-game['pixelsToUnits'](0xc)));O['createFixture'](planck['Circle'](game['pixelsToUnits'](0x5)),M);var P=game['pworld']['createJoint'](planck['WheelJoint']({'motorSpeed':0x0,'maxMotorTorque':0x14,'enableMotor':!![],'frequencyHz':0x4,'dampingRatio':0x7},K,N,N['getPosition'](),planck['Vec2'](0x0,0x1)));var Q=game['pworld']['createJoint'](planck['WheelJoint']({'motorSpeed':0x0,'maxMotorTorque':0xa,'enableMotor':![],'frequencyHz':4.5,'dampingRatio':0x7},K,O,O['getPosition'](),planck['Vec2'](0x0,0x1)));game['car']=K;game['wheels']={'back':N,'front':O};game['springs']={'back':P,'front':Q,'active':P,'passive':Q};};var prepareStage=function(){window['onresize']=function(){PP['stage']['fit'](window['innerWidth'],window['innerHeight']);PP['stage']['center'](window['innerWidth'],window['innerHeight']);};window['onresize']();document['body']['appendChild'](PP['stage']['div']);};game['stateLevel']={'init':function(){this['controlActive']={'pointer':![],'left':![],'right':![]};var R=![];var S=-0x1;if(!this['drawableCar']){this['drawableCar']=new PP['Drawable'](game['res']['car']['img']);}if(!this['drawableWheels']){this['drawableWheels']={'back':new PP['Drawable'](game['res']['tire']['img']),'front':new PP['Drawable'](game['res']['tire']['img'])};}if(!this['buttons']){this['buttons']={'left':new PP['Button'](game['res']['button']['img']),'right':new PP['Button'](game['res']['button']['img']),'switch':new PP['Button'](game['res']['button']['img'])};this['buttons']['left']['position']['x']=game['baseWidth']/0x2-0x5a;this['buttons']['left']['position']['y']=game['baseHeight']-0xaa;this['buttons']['right']['position']['x']=game['baseWidth']/0x2+0x5a;this['buttons']['right']['position']['y']=game['baseHeight']-0xaa;this['buttons']['switch']['position']['x']=game['baseWidth']/0x2;this['buttons']['switch']['position']['y']=game['baseHeight']-0x46;}else{this['buttons']['left']['enableEvents']();this['buttons']['right']['enableEvents']();this['buttons']['switch']['enableEvents']();}game['spaces']['screen']['addDrawable'](this['drawableCar'],this['drawableWheels']['back'],this['drawableWheels']['front'],this['buttons']['left'],this['buttons']['right'],this['buttons']['switch']);this['pointerControls']=new PP['PointerControls']();this['pointerControls']['onPointerDown'](function(U,V){if(R)return;var W=function(X){X['enableMotor'](!![]);X['setMotorSpeed'](0x3c*S);};game['springs']['passive']['enableMotor'](![]);W(game['springs']['active']);this['controlActive']['pointer']=!![];},this);this['pointerControls']['onPointerUp'](function(Y,Z){if(R)return;var a0=function(a1){a1['enableMotor'](!![]);a1['setMotorSpeed'](0x0);};a0(game['springs']['active']);this['controlActive']['pointer']=![];},this);this['debugControls']=new PP['Controls']();this['debugControls']['add']('keydown',function(a2){if(a2['keyCode']==0x27){this['controlActive']['right']=!![];}else if(a2['keyCode']==0x25){this['controlActive']['left']=!![];}},this);this['debugControls']['add']('keyup',function(a3){if(a3['keyCode']==0x27){this['controlActive']['right']=![];}else if(a3['keyCode']==0x25){this['controlActive']['left']=![];}},this);var T=function(){var a4=this['controlActive'];var a5=function(){R=!![];};var a6=function(){R=![];};this['buttons']['left']['ondown']=function(){a5();a4['left']=!![];};this['buttons']['right']['ondown']=function(){a5();a4['right']=!![];};this['buttons']['switch']['ondown']=function(){a5();};this['buttons']['left']['onup']=function(){a6();a4['left']=![];};this['buttons']['right']['onup']=function(){a6();a4['right']=![];};this['buttons']['switch']['onup']=function(){a6();};this['buttons']['switch']['onclick']=function(){S=S<0x0?0x1:-0x1;};};T['call'](this);},'update':function(a7,a8){game['pworld']['step'](0x1/0x3c);game['drawableToBody'](this['drawableCar'],game['car']);game['drawableToBody'](this['drawableWheels']['back'],game['wheels']['back']);game['drawableToBody'](this['drawableWheels']['front'],game['wheels']['front']);game['spaces']['screen']['redraw']();if(this['controlActive']['left']&&!this['controlActive']['right']){game['car']['applyAngularImpulse'](+0.1,!![]);}else if(this['controlActive']['right']&&!this['controlActive']['left']){game['car']['applyAngularImpulse'](-0.1,!![]);}},'end':function(){game['spaces']['screen']['removeDrawable'](this['drawableCar'],this['drawableWheels']['back'],this['drawableWheels']['front'],this['buttons']['left'],this['buttons']['right'],this['buttons']['switch']);this['pointerControls']['clear']();this['controls']['clear']();this['buttons']['left']['disableEvents']();this['buttons']['right']['disableEvents']();this['buttons']['switch']['disableEvents']();}};